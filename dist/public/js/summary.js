!function(i){var e={};function t(l){if(e[l])return e[l].exports;var n=e[l]={i:l,l:!1,exports:{}};return i[l].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=i,t.c=e,t.d=function(i,e,l){t.o(i,e)||Object.defineProperty(i,e,{configurable:!1,enumerable:!0,get:l})},t.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},t.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(e,"a",e),e},t.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},t.p="",t(t.s=7)}({7:function(i,e){var t=tools.$(".header")[0],l=tools.$(".weiyun-content")[0],n=t.offsetHeight;$.cookie("uid"),$(document).ready(function(){function i(){var i=window.innerHeight||$(window).height();l.style.height=i-n+"px",$("#searchResult").css("height",i-n-100+"px")}i(),window.onresize=i,$(".logout").on("mousedown",function(i){i.stopPropagation(),location.href="/logout"}),$("#search").on("keypress",function(i){13==i.keyCode&&""!=i.target.value.trim()&&(location.href="/hightSearch?query="+i.target.value.trim())});var e,t,o,a,d,s=[];function r(i,e){for(var t=[],l=0;l<i.length;l++)i[l].pid==e&&(i[l].children=r(i,i[l].id),t.push(i[l]));return t}function c(i,e){for(var t=0;t<i.length;t++){var l='<li style="text-align:center"><span class="listSpan" title="'+i[t].name+'"data-file_id="'+i[t].id+'">'+i[t].name+"</span></li>";e.append(l)}}function h(i,l,n){a=i.name,textSizeSpan("16px",i.name,function(r){t=i.name.length*r.height+40,o=35*i.children.length,function(i,t,l,n,o,a){console.log(l.id,"did");var r=a.attr("id"),c=document.createElement("li");c.className="mui-ul-li",c.id=r+o;var h="width:162px;",u="height:"+n+"px;";t>n?u+="top:"+(t-n)/2+"px;":h+="margin-top:"+(n-t)/2+"px";for(var p,v="height:"+n+"px",f=`\n            <div class="mui-left-vetical-box" style="${u}"  data-file_id="${l.id}">\n                <div class="mui-left-vetical-box-text" style="${v}" data-file_id="${l.id}">\n                    <span data-file_id="${l.id}">${i}</span>\n                </div>\n                <div class="mui-left-vetical-right-box-line"></div>\n            </div>\n            <ul class="mui-right-box-ul" style="${h}">${function(i){var e="";if(1==l.children.length){d=l.children[0].name,textSizeSpan("15px",d,function(i){p=i.width});var t="";p>112&&(t="display: inline-block;width: 112px;text-overflow: ellipsis;white-space: nowrap;overflow: hidden;"),e+='<li class="mui-right-box-ul-li" data-file_id='+l.children[0].id+'><div class="mui-right-box-line"><div  class="mui-right-box-left-top-line" style="border-left:none"></div><div  class="mui-right-box-left-down-line"  style="border-left:none"></div></div><div class="mui-right-box-right-text"><div class="mui-right-span-box" data-file_id='+l.children[0].id+'><span style="'+t+'" title='+d+" data-file_id="+l.children[0].id+">"+d+"</span></div></div></li>"}else for(var n=0;n<l.children.length;n++){d=l.children[n].name,textSizeSpan("15px",d,function(i){p=i.width});t="";p>112&&(t="display: inline-block;width: 112px;text-overflow: ellipsis;white-space: nowrap;overflow: hidden;"),e+=0==n?'<li class="mui-right-box-ul-li" data-file_id='+l.children[n].id+'><div class="mui-right-box-line"><div  class="mui-right-box-left-top-line" style="border-left:none"></div><div  class="mui-right-box-left-down-line"></div></div><div class="mui-right-box-right-text"><div class="mui-right-span-box" data-file_id='+l.children[n].id+'><span style="'+t+'" title='+d+" data-file_id="+l.children[n].id+">"+d+"</span></div></div></li>":n==l.children.length-1?'<li class="mui-right-box-ul-li" data-file_id='+l.children[n].id+'><div class="mui-right-box-line"><div  class="mui-right-box-left-top-line" ></div><div  class="mui-right-box-left-down-line"  style="border-left:none"></div></div><div class="mui-right-box-right-text"><div class="mui-right-span-box" data-file_id='+l.children[n].id+'><span style="'+t+'" title='+d+" data-file_id="+l.children[n].id+">"+d+"</span></div></div></li>":'<li class="mui-right-box-ul-li" data-file_id='+l.children[n].id+'><div class="mui-right-box-line"><div  class="mui-right-box-left-top-line" ></div><div  class="mui-right-box-left-down-line"></div></div><div class="mui-right-box-right-text"><div class="mui-right-span-box" data-file_id='+l.children[n].id+'><span style="'+t+'" title='+d+" data-file_id="+l.children[n].id+">"+d+"</span></div></div></li>"}return e}(l.id)}</ul>\n        `,x=0;x<l.children.length;x++)d=l.children[x].name,textSizeSpan("15px",d,function(i){s[x]=i.width});(e=Math.max(...s))>112&&(e=112),console.log(e),c.style.height=t>n?t+"px":n+"px",c.innerHTML=f,$(a).append(c)}(a,o,i,t,l,n)})}local_api._list("document",{type:"0",u_path:"^"+$.cookie("tree_path")},"","createdAt|pid|name",1,-1,$.cookie("appkey"),function(i){console.log(i,"first");var e=i.data.filter(function(i){return i.id==$.cookie("docId")}),t=r(i.data,e[0].id);console.log(t,"second"),$(".main").empty();var l=(window.innerWidth-170)/t.length;l<222?l="222px":l+="px";for(var n=0;n<t.length;n++){var o=`<div class="mui-box-${n+1}" style="width:${l};float:left;border-right: 1px solid #0070C0;">\n                                <div class="mui-title-box">\n                                    <span id="title-${n+1}" class="mui-title">${t[n].name}</span>\n                                </div>\n                                <div style="position: relative;">\n                                    <ul id="ul-box-${n+1}" class="">\n                                    \n                                    </ul>\n                                </div>\n                            </div>`;$(".main").append(o)}0==t.length&&(o='<div class="mui-box-1">\n                                <div class="mui-title-box" style="height:50px">\n                                 </div>\n                                <div style="position: relative;">\n                                    <ul id="ul-box-1" class="mui-box-safety-supervision-ul" style="max-width:712px">\n                                    \n                                    </ul>\n                                </div>\n                            </div>',$(".main").append(o)),function(i){local_api._list("document",{type:"0|1",u_path:"^"+$.cookie("tree_path")},"","createdAt|pid|name",1,-1,$.cookie("appkey"),function(e){console.log(e,"hellodata");var t=e.data.filter(function(i){return i.id==$.cookie("docId")}),l=r(e.data,t[0].id);console.log(l,e.data[0].id),console.log(e.data[0]);var n=[];if(i>=2){for(var o=0;o<l.length;o++)n.push(l[o].children.length);var a=52*Math.max(...n)+50+47+"px";for(o=0;o<l.length;o++){$(".mui-box-"+(o+1)).css("height",a),(d=$("#ul-box-"+(o+1))).empty(),d.css("padding-top","50px"),c(l[o].children,d)}}else{var d;$("#ul-box-1").empty(),$(".mui-box-1").css("width","100%"),function(i,e){for(var t=0;t<i.length;t++){var l=t;h(i[t],l,e)}}(l,d=$("#ul-box-1"))}$(".main").show(),$(".mui-box-2").css("height",$(".mui-box-1").height()+"px"),console.log(l)})}(t.length)}),$(".main").click(function(i){console.log(i.target.dataset.file_id);var e=i.target.dataset.file_id;e&&(location.href="/file?fileId="+e)}),tools.addEvent(tools.$("#search")[0],"focus",function(){var i=tools.$("#_search_bar")[0];tools.addClass(i,"focus")}),tools.addEvent(tools.$("#search")[0],"blur",function(){var i=tools.$("#_search_bar")[0];setTimeout(function(){tools.removeClass(i,"focus")},200)})})}});